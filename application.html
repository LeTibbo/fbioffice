<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="styles.css">
    <title>FBI HQ - Application</title>
    <link rel="icon" type="image/x-icon" href="images/FBI.ico">
</head>
<body>
    <!-- Navigation -->
    <nav>
        <ul>
            <li><a href="./">Home</a></li>
            <li><a href="./fleet">Fleet</a></li>
            <li><a href="./ranks">Ranks</a></li>
            <li><a href="./application">Apply</a></li>
            <li><a href="https://discord.gg/rfPvTcupx4 ">Discord</a></li>
        </ul>
    </nav>

    <!-- Home -->
    <section id="home">
        <h1>Employee Application</h1>
    </section>

    <div class="disclaimer">
        <h2>Disclaimer</h2>
        <ul id="disclaimer-list">
            <li>You <strong>need</strong> to be a part of the FBI Discord to apply. <a class="disclaimer-discord" style="color: #000;" href="https://discord.gg/rfPvTcupx4" target="_blank">Join here.</a></li>
            <li>Providing incorrect answers or lack of effort in your responses <strong>will</strong> result in rejection.</li>
        </ul>
    </div>

    <!--Form-->
    <form id="applicationForm">
        <div class="question-group">
            <label for="discordID">1. What is your Discord User ID?</label>
            <p class="note"><a class="note" href="https://www.youtube.com/watch?v=NLWtSHWKbAI" target="_blank">YouTube - How to get User ID?</a> - Example: 493455159201103882</p>
            <input type="number" id="discordID" name="discordID" required>
        </div>

        <div class="question-group">
            <label for="username">2. What is your Ingame Username?</label>
            <p class="note">You can find this at a station computer under "Employment Info"</p>
            <input type="text" id="username" name="username" required>
        </div>

        <div class="question-group">
            <label for="badgeid">3. What is your Badge ID?</label>
            <p class="note">You can find this at a station computer under "Employment Info"</p>
            <input type="number" id="badgeid" name="badgeid" required>
        </div>

        <div class="question-group">
            <label for="playTime">4. How much do you play on average?</label>
            <p class="note">Eg. 1h on weekdays, 3h on weekends</p>
            <input type="text" id="playTime" name="playTime" required>
        </div>

        <div class="question-group">
            <label for="playDuration">5. How long have you been playing on Police World?</label>
            <input type="text" id="playDuration" name="playDuration" required>
        </div>

        <div class="question-group">
            <label for="aboutYou">6. Tell us about yourself.</label>
            <textarea id="aboutYou" name="aboutYou" rows="4" required></textarea>
        </div>

        <div class="question-group">
            <label for="previousDepartments">7. Have you been in other departments before?</label>
            <p class="note">If yes, which?</p>
            <input type="text" id="previousDepartments" name="previousDepartments" required>
        </div>

        <div class="question-group">
            <label for="referral">8. Were you referred by someone?</label>
            <p class="note">If yes, by whom?</p>
            <input type="text" id="referral" name="referral">
        </div>

        <div>
            <p id="errorText" style="color: red; display: none;">Please fill out all fields.</p>
        </div>

        <button class="submit-button" type="button" onclick="validateAndSubmit()">Submit</button>
    </form>


<script>
function validateAndSubmit() {
    var requiredFields = document.querySelectorAll('input[required], textarea[required]');
    var hasEmptyFields = false;

    requiredFields.forEach(function(field) {
        if (!field.value.trim()) {
            hasEmptyFields = true;
        }
    });

    if (hasEmptyFields) {
        document.getElementById("errorText").style.display = "block";
        return;
    } else {
        document.getElementById("errorText").style.display = "none";
        submitApplication();
    }
}


function submitApplication() {
    var discordID = document.getElementById("discordID").value;
    var username = document.getElementById("username").value;
    var badgeid = document.getElementById("badgeid").value;
    var playTime = document.getElementById("playTime").value;
    var playDuration = document.getElementById("playDuration").value;
    var aboutYou = document.getElementById("aboutYou").value;
    var previousDepartments = document.getElementById("previousDepartments").value;
    var referral = document.getElementById("referral").value;

    var webhookUrl = "https://discord.com/api/webhooks/1089292411336933467/MEKhleixcTo6x9xLl0HP9uWBR96PljjRAiG_Q5SdiydFtSS40uIVQfHoDlbfcBmhvNqq"; // Replace with your actual webhook URL

    var payload = {
        "embeds": [
            {
                "title": "New Employee Application",
                "fields": [
                    { "name": "Discord ID", "value": discordID },
                    { "name": "Mention", "value": "<@" + discordID + ">" },
                    { "name": "Username", "value": username },
                    { "name": "Badge ID", "value": badgeid },
                    { "name": "Average Play Time", "value": playTime },
                    { "name": "Play Duration on Police World", "value": playDuration },
                    { "name": "About Me", "value": aboutYou },
                    { "name": "Previous Departments", "value": previousDepartments },
                    { "name": "Referred By", "value": referral }
                ],
                "color": 13750751 // Custom color, you can use any color code
            }
        ]
    };

    fetch(webhookUrl, {
        method: "POST",
        headers: {
            "Content-Type": "application/json"
        },
        body: JSON.stringify(payload)
    })
    .then(response => {
        console.log("Application sent to Discord webhook.");
        window.location.href = './success.html';
    })
    .catch(error => {
        console.error("Error submitting application:", error);
        alert("An error occurred while submitting the application. Please contact @letibo on Discord");
    });
}
</script>

</body>
</html>
